{% extends 'base/base.html' %}
{% load static %}

{% block title %}Добавить площадку{% endblock %}

{% block content %}
<div class="container">
    <h2 class="section-title">Добавить новую площадку</h2>
    <form method="post" enctype="multipart/form-data" class="place-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="id_name">Название площадки:</label>
            <input type="text" name="name" id="id_name" required>
        </div>
        <div class="form-group">
            <label for="id_description">Описание:</label>
            <textarea name="description" id="id_description" required></textarea>
        </div>

        <div class="form-group">
            <label for="id_existing_category">Категория:</label>
            {{ form.existing_category }}
        </div>
        <div class="form-group">
            <label for="id_new_category_name">Или добавить новую категорию:</label>
            <input type="text" name="new_category_name" id="id_new_category_name" placeholder="Название новой категории">
        </div>
        <div class="form-spacer"></div>

        <div class="form-group">
            <label for="id_latitude">Широта:</label>
            <input type="text" name="latitude" id="id_latitude">
        </div>
        <div class="form-spacer"></div>

        <div class="form-group">
            <label for="id_longitude">Долгота:</label>
            <input type="text" name="longitude" id="id_longitude">
        </div>
        <div class="form-spacer"></div>

        <div class="form-group">
            <label>Добавить фото:</label>
            <div class="file-upload-wrapper">
                <input type="file" name="photos" id="id_photos" multiple class="file-upload-input">
                <label for="id_photos" class="file-upload-button submit-btn">Добавить</label>
                <span id="file-count" class="file-upload-count">Файлы не выбраны</span>
            </div>
        </div>
        <div class="form-spacer"></div>
        
        <button type="submit" class="submit-btn">Отправить на модерацию</button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.getElementById('id_photos');
    const fileCountSpan = document.getElementById('file-count');

    if (fileInput && fileCountSpan) {
        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                fileCountSpan.textContent = `Выбрано: ${this.files.length}`;
                fileCountSpan.style.color = '#2c3e50';
            } else {
                fileCountSpan.textContent = 'Файлы не выбраны';
                fileCountSpan.style.color = '#888';
            }
        });
    }
});
</script>
{% endblock %}