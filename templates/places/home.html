{% extends '../base/base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <div class="card-list">
        {% for place in places %}
        <div class="card">
            <a href="{% url 'place_detail' place.id %}">
                {% if place.first_photo %}
                    <img src="{{ place.first_photo.image.url }}" alt="{{ place.name }}" class="card-image">
                {% else %}
                    <div class="placeholder-image">
                        <p>Нет фото</p>
                    </div>
                {% endif %}
                <div class="card-content">
                    <h3 class="card-title">{{ place.name }}</h3>
                    {% if place.average_rating %}
                        <div class="rating-display">
                            {% for _ in "12345"|make_list %}
                                <span class="star {% if forloop.counter <= place.average_rating %}filled{% endif %}">&#9733;</span>
                            {% endfor %}
                            <span class="rating-value">{{ place.average_rating|floatformat:1 }}</span>
                        </div>
                    {% else %}
                        <p class="no-rating">Нет рейтинга</p>
                    {% endif %}
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}